build: false
environment:
  global:
    TESTS_PHINX_DB_ADAPTER_MYSQL_ENABLED: false
    TESTS_PHINX_DB_ADAPTER_POSTGRES_ENABLED: false
    TESTS_PHINX_DB_ADAPTER_SQLITE_ENABLED: false
    TESTS_PHINX_DB_ADAPTER_SQLSRV_ENABLED: true
    TESTS_PHINX_DB_ADAPTER_SQLSRV_HOST: SQL2012SP1
    TESTS_PHINX_DB_ADAPTER_SQLSRV_USERNAME: sa
    TESTS_PHINX_DB_ADAPTER_SQLSRV_PASSWORD: Password12!
    TESTS_PHINX_DB_ADAPTER_SQLSRV_DATABASE: master
    TESTS_PHINX_DB_ADAPTER_SQLSRV_PORT: 1433
  matrix:
    - PHP: "C:/PHP"
services:
  - mssql2012sp1
init:
  - SET PATH=C:\php\;%PATH%
install:
  - cinst php
  - copy c:\php\php.ini-production c:\php\php.ini
  - echo date.timezone=Europe/Berlin >> c:\php\php.ini
  - echo extension_dir=ext >> c:\php\php.ini
  - echo extension=php_openssl.dll >> c:\php\php.ini
  - cd C:\projects\phinx
  - php -c c:/PHP/php.ini -r "readfile('https://getcomposer.org/installer');" | php
  - php -c c:/PHP/php.ini composer.phar self-update
  - php -c c:/PHP/php.ini composer.phar install
test_script:
  - cd C:\projects\phinx
  - "%PHP%/php.exe --version"
  - vendor/bin/phpunit.bat
